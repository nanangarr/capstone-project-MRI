(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{1654:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>g});var s=r(7876),n=r(4232),i=r(3397),t=r(4023),l=r(9516),o=r(7699),c=r(5761),d=r(6121),p=r(634),m=r(1859),h=r(2179),w=r(8348);r(4587);var u=r(5364);function g(e){let{collapsed:a}=e,[r,g]=(0,n.useState)([]),[x,b]=(0,n.useState)(""),[j,N]=(0,n.useState)(r),[_,k]=(0,n.useState)(1);(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,w.jW)();g(e)}catch(e){console.error("Error fetching pasien data:",e)}})()},[]),(0,n.useEffect)(()=>{N(r.filter(e=>e.nama.toLowerCase().includes(x.toLowerCase())||e.tanggal_lahir&&e.tanggal_lahir.toLowerCase().includes(x.toLowerCase())||e.tempat_lahir&&e.tempat_lahir.toLowerCase().includes(x.toLowerCase())||e.pemeriksaans&&e.pemeriksaans.length>0&&e.pemeriksaans[0].jenis_kelamin&&e.pemeriksaans[0].jenis_kelamin.toLowerCase().includes(x.toLowerCase())||e.no_hp&&e.no_hp.toLowerCase().includes(x.toLowerCase())||e.pemeriksaans&&e.pemeriksaans.length>0&&e.pemeriksaans[0].kategori&&e.pemeriksaans[0].kategori.toLowerCase().includes(x.toLowerCase())))},[x,r]);let f=Math.ceil(j.length/10),[v,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=10*_;y(j.slice(e-10,e))},[_,j]);let T=0===j.length?0:(_-1)*10+1,C=Math.min(10*_,j.length),L=e=>e?new Date(e).toLocaleDateString("id-ID"):"-",P=e=>e?"Ya":"Tidak",I=e=>e?e.split("\n").map((e,a)=>(0,s.jsxs)("span",{children:[e,(0,s.jsx)("br",{})]},a)):"-";return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"container p-4 md:p-6 transition-all duration-300 ".concat(a?"max-w-[calc(100vw-4rem)]":"max-w-[calc(100vw-16rem)]"),children:[(0,s.jsx)("h1",{className:"font-bold text-xl md:text-2xl mb-4 md:mb-6",children:"Riwayat Pemeriksaan Pasien"}),(0,s.jsxs)("div",{className:"relative w-full max-w-[345px] mb-2.5",children:[(0,s.jsx)(i.p,{id:"search",type:"input",placeholder:"Cari riwayat pasien...",value:x,onChange:e=>{b(e.target.value),k(1)},className:"border-gray-300 pr-10"}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(l.A,{size:18,className:"text-gray-500"})})]}),(0,s.jsx)("div",{className:"w-full border border-black rounded-lg overflow-x-auto",children:(0,s.jsxs)(o.X,{striped:!0,className:"w-[800px]",children:[(0,s.jsxs)(c.n,{children:[(0,s.jsxs)(d.H,{className:"bg-gray-100 border-b",children:[(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"No"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",colSpan:4,children:"Data Pasien"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",colSpan:11,children:"Data Pemeriksaan"})]}),(0,s.jsxs)(d.H,{className:"bg-gray-50 border-b",children:[(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Nama"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Tempat/Tgl Lahir"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Jenis Kelamin"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"No HP"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Tanggal Pemeriksaan"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Umur"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"BB/TB"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Hipertensi"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Penyakit Jantung"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Glukosa"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap",children:"Hasil Prediksi"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap w-64",children:"Deskripsi"}),(0,s.jsx)(p.T,{className:"border-r whitespace-nowrap w-64",children:"Solusi"}),(0,s.jsx)(p.T,{className:"whitespace-nowrap",children:"Gambar MRI"})]})]}),(0,s.jsx)(m.B,{className:"divide-y",children:v.map((e,a)=>{let r=e.pemeriksaans&&e.pemeriksaans.length>0?e.pemeriksaans[0]:null;return(0,s.jsxs)(d.H,{className:"hover:bg-gray-50",children:[(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:T+a}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:e.nama||"-"}),(0,s.jsxs)(h.n,{className:"border-r whitespace-nowrap",children:[e.tempat_lahir||"-","/",L(e.tanggal_lahir)||"-"]}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:(null==r?void 0:r.jenis_kelamin)||"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:e.no_hp||"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:r?L(r.createdAt):"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:(null==r?void 0:r.umur)||"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:r?"".concat(r.berat_badan," kg / ").concat(r.tinggi_badan," cm"):"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:r?P(r.hipertensi):"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:r?P(r.penyakit_jantung):"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap",children:(null==r?void 0:r.glukosa)||"-"}),(0,s.jsx)(h.n,{className:"border-r whitespace-nowrap font-semibold",children:(null==r?void 0:r.kategori)||"-"}),(0,s.jsx)(h.n,{className:"border-r min-w-[300px] p-2",children:(0,s.jsx)("div",{className:"text-sm",children:(null==r?void 0:r.deskripsi)?I(r.deskripsi):"-"})}),(0,s.jsx)(h.n,{className:"border-r min-w-[500px] p-2",children:(0,s.jsx)("div",{className:"text-sm",children:(null==r?void 0:r.solusi)?I(r.solusi):"-"})}),(0,s.jsx)(h.n,{className:"whitespace-nowrap",children:(null==r?void 0:r.gambar_MRI)?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("img",{src:r.gambar_MRI_url||"".concat(u.env.NEXT_PUBLIC_API_URL,"/uploads/").concat(r.gambar_MRI),alt:"MRI Scan",className:"h-12 w-12 object-cover cursor-pointer rounded",onClick:()=>window.open(r.gambar_MRI_url||"".concat(u.env.NEXT_PUBLIC_API_URL,"/uploads/").concat(r.gambar_MRI),"_blank")})}):"-"})]},e.id)})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(0,s.jsx)("span",{className:"font-medium",children:0===j.length?0:T})," to"," ",(0,s.jsx)("span",{className:"font-medium",children:C})," of"," ",(0,s.jsx)("span",{className:"font-medium",children:j.length})," results"]}),(0,s.jsx)("div",{className:"flex justify-center my-4",children:f>0&&(0,s.jsx)(t.d,{currentPage:_,totalPages:f,onPageChange:e=>{k(e)},showIcons:!0})})]})]})})}},3397:(e,a,r)=>{"use strict";r.d(a,{p:()=>i});var s=r(7876);r(4232);var n=r(8928);function i(e){let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},5507:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/pasien",function(){return r(1654)}])},8348:(e,a,r)=>{"use strict";r.d(a,{jW:()=>i,kB:()=>n});var s=r(3004);let n=async e=>{try{let a=new FormData;for(let[r,s]of(a.append("nama",e.nama),a.append("tempat_lahir",e.tempat_lahir),a.append("tanggal_lahir",e.tanggal_lahir),a.append("no_hp",e.no_hp),a.append("jenis_kelamin",e.jenis_kelamin),a.append("berat_badan",e.berat_badan),a.append("tinggi_badan",e.tinggi_badan),a.append("umur",e.umur),a.append("hipertensi",e.hipertensi.toString()),a.append("penyakit_jantung",e.penyakit_jantung.toString()),a.append("stroke",e.stroke.toString()),a.append("status_nikah",e.status_nikah),a.append("pekerjaan",e.pekerjaan),a.append("tempat_tinggal",e.tempat_tinggal),a.append("glukosa",e.glukosa),a.append("merokok",e.merokok),e.gambar_MRI&&a.append("gambar_MRI",e.gambar_MRI),console.log("Sending prediction data with fields:"),a.entries()))console.log("".concat(r,": ").concat("gambar_MRI"===r?"File data":s));return(await s.A.post("/predictions/predict",a,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data}catch(e){var a;throw console.error("Error submitting prediction:",e),e.response&&(console.error("Error response:",e.response.data),console.error("Status:",e.response.status)),(null==(a=e.response)?void 0:a.data)||{success:!1,message:"Failed to submit prediction. Please try again."}}},i=async()=>{try{return(await s.A.get("/patients/predictions")).data||[]}catch(a){var e;throw console.error("Error fetching patient history:",a),(null==(e=a.response)?void 0:e.data)||{success:!1,message:"Failed to fetch patient history."}}}}},e=>{var a=a=>e(e.s=a);e.O(0,[308,522,587,636,593,792],()=>a(5507)),_N_E=e.O()}]);